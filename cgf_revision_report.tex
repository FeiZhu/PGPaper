\documentclass[11pt,fullpage]{article}
%\usepackage{multicol,wrapfig,amsmath,subfigure}
\usepackage{multicol,amsmath,amssymb,algorithmic}
\usepackage{graphics,graphicx}
\usepackage[right = 2.5cm, left=2.5cm, top = 2.5cm, bottom =2.5cm]{geometry}
\pagestyle{plain}
\def\urlfont{\DeclareFontFamily{OT1}{cmtt}{\hyphenchar\font='057}
              \normalfont\ttfamily \hyphenpenalty=10000}

%\input macros

\newcommand{\subheading}[1]{\noindent \textbf{#1}}
\newcommand{\grad}{\nabla}
\newcommand{\jump}[1]{[#1]}
\newcommand{\limit}[2]{\lim_{#1 \rightarrow #2}}
\newcommand{\mb}[1]{\mathbf{#1}}
\newcommand{\reals}[1]{\mathbb{R}^{#1}}


\begin{document}
The energy density for the collision particles is
$$
\psi(\mb{x_p})=\frac{k}{2}(\mb{x}_p-\mb{x}^0_p)^2
$$
where
$$
\mb{x}_p=\sum_{i_g}{\hat{\mb{x}}_{i_g}N_{i_g}(\mb{x}_p)}
$$
We can write $\psi$ as a function of Eulerian grid node positions ($\hat{\mb{x}}$) as
$$
\psi(\hat{\mb{x}})=\frac{k}{2}(\sum_{i_g}\hat{\mb{x}}_{i_g}N_{i_g}(\mb{x}_p)-\mb{x}^0_p)^2
$$
and
$$
\frac{\partial \psi}{\partial{\hat{\mb x}_{j_g}}}(\hat {\mb x})=kN_{j_g}(\mb{x}_p)(\sum_{i_g}\hat{\mb{x}}_{i_g}N_{i_g}(\mb{x}_p)-\mb{x}^0_p).
$$
\section{Forces}
Therefore the force on the $j_g$ node is
$$
\mb{f}_{j_g}\left(\hat{\mb{x}}\right)=-\frac{\partial e}{\partial \hat{\mb{x}}_{j_g}}\left(\hat{\mb{x}}\right)
$$
where
$$
e\left(\hat{\mb{x}}\right)=\sum_p\psi(\hat{\mb x})V_p
$$
$V_p$ is the volume of particle $p$. So:
$$
\mb{f}_{j_g}\left(\hat{\mb{x}}\right)=-k\sum_p{N_{j_g}(\mb{x}_p)(\sum_{i_g}\hat{\mb{x}}_{i_g}N_{i_g}(\mb{x}_p)-\mb{x}^0_p)V_p}
$$
\section{Force derivatives}
$$
\mb{f}_{j_g}\left(\hat{\mb{x}}\right)=-k\sum_p{N_{j_g}(\mb{x}_p)(\sum_{i_g}\hat{\mb{x}}_{i_g}N_{i_g}(\mb{x}_p)-\mb{x}^0_p)V_p}
$$
$$
\frac{\partial {f_{{j_g}_l}}}{\partial \hat{x}_{{k_g}_m}}\left(\hat{\mb{x}}\right)=-k\sum_p{N_{j_g}(\mb{x}_p)\delta_{lm}N_{k_g}(\mb{x}_p)V_p}
$$
\end{document}